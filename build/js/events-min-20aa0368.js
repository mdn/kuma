!function($){$.fn.gMap=function(options){if(!window.GBrowserIsCompatible||!GBrowserIsCompatible())return this;var opts=$.extend({},$.fn.gMap.defaults,options);return this.each(function(){if($gmap=new GMap2(this),$(this).data("gmap",$gmap),$geocoder=new GClientGeocoder,opts.address?$geocoder.getLatLng(opts.address,function(o){$gmap.setCenter(o,opts.zoom)}):opts.latitude&&opts.longitude?$gmap.setCenter(new GLatLng(opts.latitude,opts.longitude),opts.zoom):$.isArray(opts.markers)&&opts.markers.length>0?opts.markers[0].address?$geocoder.getLatLng(opts.markers[0].address,function(o){$gmap.setCenter(o,opts.zoom)}):$gmap.setCenter(new GLatLng(opts.markers[0].latitude,opts.markers[0].longitude),opts.zoom):$gmap.setCenter(new GLatLng(34.885931,9.84375),opts.zoom),$gmap.setMapType(opts.maptype),0==opts.controls.length)$gmap.setUIToDefault();else for(var i=0;i<opts.controls.length;i++)eval("$gmap.addControl(new "+opts.controls[i]+"());");1==opts.scrollwheel&&0!=opts.controls.length&&$gmap.enableScrollWheelZoom(),function(o){var n=arguments.callee;o.length&&(marker=o.pop(),gicon=new GIcon,gicon.image=opts.icon.image,gicon.shadow=opts.icon.shadow,gicon.iconSize=$.isArray(opts.icon.iconsize)?new GSize(opts.icon.iconsize[0],opts.icon.iconsize[1]):opts.icon.iconsize,gicon.shadowSize=$.isArray(opts.icon.shadowsize)?new GSize(opts.icon.shadowsize[0],opts.icon.shadowsize[1]):opts.icon.shadowsize,gicon.iconAnchor=$.isArray(opts.icon.iconanchor)?new GPoint(opts.icon.iconanchor[0],opts.icon.iconanchor[1]):opts.icon.iconanchor,gicon.infoWindowAnchor=$.isArray(opts.icon.infowindowanchor)?new GPoint(opts.icon.infowindowanchor[0],opts.icon.infowindowanchor[1]):opts.icon.infowindowanchor,marker.icon&&(gicon.image=marker.icon.image,gicon.shadow=marker.icon.shadow,gicon.iconSize=$.isArray(marker.icon.iconsize)?new GSize(marker.icon.iconsize[0],marker.icon.iconsize[1]):marker.icon.iconsize,gicon.shadowSize=$.isArray(marker.icon.shadowsize)?new GSize(marker.icon.shadowsize[0],marker.icon.shadowsize[1]):marker.icon.shadowsize,gicon.iconAnchor=$.isArray(marker.icon.iconanchor)?new GPoint(marker.icon.iconanchor[0],marker.icon.iconanchor[1]):marker.icon.iconanchor,gicon.infoWindowAnchor=$.isArray(marker.icon.infowindowanchor)?new GPoint(marker.icon.infowindowanchor[0],marker.icon.infowindowanchor[1]):marker.icon.infowindowanchor),marker.address?("_address"==marker.html&&(marker.html=marker.address),$geocoder.getLatLng(marker.address,function(e,r){return function(i){setTimeout(function(){n(o)},opts.query_delay),i&&(gmarker=new GMarker(i,e),r.html&&gmarker.bindInfoWindowHtml(opts.html_prepend+r.html+opts.html_append),r.html&&r.popup&&gmarker.openInfoWindowHtml(opts.html_prepend+r.html+opts.html_append),gmarker&&$gmap.addOverlay(gmarker))}}(gicon,marker))):("_latlng"==marker.html&&(marker.html=marker.latitude+", "+marker.longitude),gmarker=new GMarker(new GPoint(marker.longitude,marker.latitude),gicon),marker.html&&gmarker.bindInfoWindowHtml(opts.html_prepend+marker.html+opts.html_append),marker.html&&marker.popup&&gmarker.openInfoWindowHtml(opts.html_prepend+marker.html+opts.html_append),gmarker&&$gmap.addOverlay(gmarker),setTimeout(function(){n(o)},0)))}(opts.markers)})},$.fn.gMap.defaults={address:"",latitude:0,longitude:0,zoom:1,markers:[],controls:[],scrollwheel:!0,maptype:G_NORMAL_MAP,html_prepend:'<div class="gmap_marker">',html_append:"</div>",query_delay:100,icon:{image:"http://www.google.com/mapfiles/marker.png",shadow:"http://www.google.com/mapfiles/shadow50.png",iconsize:[20,34],shadowsize:[37,34],iconanchor:[9,34],infowindowanchor:[9,2]}}}(jQuery),$(document).ready(function(){var o=[],n=$("#map_canvas");$("#upcoming tbody tr").each(function(){var n=$(this),e=n.children("td.date").html()+"<br/>"+n.children("td.conference").html()+"<br/>";o.push({address:n.children("td.location").text(),icon:{image:"/media/img/icn-tool-mozilla.png",iconsize:[32,26],iconanchor:[16,13],infowindowanchor:[24,0]},html:e})}),n.gMap({longitude:1,latitude:10,markers:o,zoom:2}),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(o){var e=o.coords;n.data("gmap").setCenter(new GLatLng(e.latitude,e.longitude),4)})});