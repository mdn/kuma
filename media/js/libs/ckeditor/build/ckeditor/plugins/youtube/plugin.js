(function(){CKEDITOR.plugins.add("youtube",{icons:"youtube-moono",init:function(a){a.lang.youtube={button:gettext("Embed YouTube Video"),title:gettext("Embed Youtube Video"),txtEmbed:gettext("Paste Embed Code Here"),txtUrl:gettext("Paste Youtube Video URL"),txtWidth:gettext("Width"),txtHeight:gettext("Height"),noCode:gettext("You must input an embed code or URL"),invalidEmbed:gettext("The embed code you've entered doesn't appear to be valid"),invalidUrl:gettext("The URL you've entered doesn't appear to be valid"),
or:gettext("or")};a.addCommand("youtube",new CKEDITOR.dialogCommand("youtube"));a.ui.addButton("youtube",{icon:"youtube-moono",label:a.lang.youtube.button,command:"youtube",toolbar:"insert"});CKEDITOR.dialog.add("youtube",function(){return{title:a.lang.youtube.title,minWidth:550,minHeight:200,contents:[{id:"youtubePlugin",expand:!0,elements:[{id:"txtEmbed",type:"textarea",label:a.lang.youtube.txtEmbed,autofocus:"autofocus",onChange:function(){0<this.getValue().length?this.getDialog().getContentElement("youtubePlugin",
"txtUrl").disable():this.getDialog().getContentElement("youtubePlugin","txtUrl").enable()},validate:function(){if(this.isEnabled())if(this.getValue()){if(!/https?\:\/\//.test(this.getValue()))return alert(a.lang.youtube.invalidEmbed),!1}else return alert(a.lang.youtube.noCode),!1}},{type:"html",html:a.lang.youtube.or+"<hr>"},{type:"hbox",widths:["70%","15%","15%"],children:[{id:"txtUrl",type:"text",label:a.lang.youtube.txtUrl,onChange:function(){0<this.getValue().length?this.getDialog().getContentElement("youtubePlugin",
"txtEmbed").disable():this.getDialog().getContentElement("youtubePlugin","txtEmbed").enable()},validate:function(){if(this.isEnabled())if(this.getValue()){if(!/https?\:\/\//.test(this.getValue()))return alert(a.lang.youtube.invalidUrl),!1}else return alert(a.lang.youtube.noCode),!1}},{type:"text",id:"txtWidth",width:"60px",label:a.lang.youtube.txtWidth,"default":"640"},{type:"text",id:"txtHeight",width:"60px",label:a.lang.youtube.txtHeight,"default":"360"}]}]}],onOk:function(){var a="";if(this.getContentElement("youtubePlugin",
"txtEmbed").isEnabled())a=this.getValueOf("youtubePlugin","txtEmbed").replace("http:","https:");else{var b=this.getValueOf("youtubePlugin","txtUrl"),c=this.getValueOf("youtubePlugin","txtWidth"),d=this.getValueOf("youtubePlugin","txtHeight"),b=b.split("?");(b=b.length&&b[1]?jQuery.parseQuerystring(b[1]).v:"")&&(a='<iframe width="'+c+'" height="'+d+'" src="'+("https://www.youtube.com/embed/"+b+"/?feature=player_detailpage")+'" frameborder="0" allowfullscreen></iframe>')}this.getParentEditor().insertHtml(a);
this.getContentElement("youtubePlugin","txtEmbed").enable();this.getContentElement("youtubePlugin","txtUrl").enable()}}})}})})();