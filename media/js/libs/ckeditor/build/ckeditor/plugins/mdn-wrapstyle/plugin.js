(function(){function p(b,l,m){if(!l.is||!l.getCustomData("block_processed"))l.is&&CKEDITOR.dom.element.setMarker(m,l,"block_processed",!0),b.push(l)}var q=function(){var b=CKEDITOR.tools.extend({},CKEDITOR.dtd.$blockLimit);delete b.div;delete b.td;delete b.th;return b}(),t=CKEDITOR.dtd.div;CKEDITOR.plugins.add("mdn-wrapstyle",{onLoad:function(){CKEDITOR.style.addCustomHandler({type:"wrap",assignedTo:CKEDITOR.STYLE_BLOCK,setup:function(b){this.element=b.element},apply:function(b){b.execCommand("wrapstyle",
this)},remove:function(b){b.execCommand("wrapstyle",this)},checkElementRemovable:function(b,l){return(b=b&&b.getAscendant(this.element,!0))?CKEDITOR.style.prototype.checkElementRemovable.call(this,b,l):!1}})},init:function(b){b.addCommand("wrapstyle",{exec:function(b,m){for(var n=b.getSelection(),r=n&&n.createBookmarks(),g=n&&n.getRanges(),h=g&&g.createIterator(),f,i,k=!0,g=[];f=h.getNextRange();){i=f.createIterator();for(i.enforceRealBlocks=!0;f=i.getNextParagraph();)if((f=f.getAscendant(m.element,
!0))&&m.checkElementRemovable(f)){var e=g.pop(),d=e&&e.getCommonAncestor(f);d&&m.checkElementRemovable(d)?g.push(d):(e&&g.push(e),g.push(f))}else 0==g.length&&(k=!1)}if(k){h=0;for(k=g.length;h<k;h++)g[h].remove(!0)}else{g=[];f={};i=[];for(var a,h=b.document.getSelection(),e=h.getRanges(),k=h.createBookmarks(),j,d=0;d<e.length;d++)for(j=e[d].createIterator();a=j.getNextParagraph();)if(a.getName()in q){var c=a.getChildren();for(a=0;a<c.count();a++)p(i,c.getItem(a),f)}else{for(;!t[a.getName()]&&"body"!=
a.getName();)a=a.getParent();p(i,a,f)}CKEDITOR.dom.element.clearAllMarkers(f);e=[];d=null;for(j=0;j<i.length;j++){a=i[j];for(var c=(new CKEDITOR.dom.elementPath(a)).elements,s=void 0,o=0;o<c.length;o++)if(c[o].getName()in q){s=c[o];break}c=s;c.equals(d)||(d=c,e.push([]));e[e.length-1].push(a)}for(d=0;d<e.length;d++){c=e[d][0];i=c.getParent();for(a=1;a<e[d].length;a++)i=i.getCommonAncestor(e[d][a]);j=new CKEDITOR.dom.element("div",b.document);for(a=0;a<e[d].length;a++){for(c=e[d][a];!c.getParent().equals(i);)c=
c.getParent();e[d][a]=c}for(a=0;a<e[d].length;a++)if(c=e[d][a],!c.getCustomData||!c.getCustomData("block_processed"))c.is&&CKEDITOR.dom.element.setMarker(f,c,"block_processed",!0),a||j.insertBefore(c),j.append(c);CKEDITOR.dom.element.clearAllMarkers(f);g.push(j)}h.selectBookmarks(k);h=0;for(k=g.length;h<k;h++)f=g[h],m.applyToObject(f)}r&&n.selectBookmarks(r)}})}})})();