CKEDITOR.dialog.add("mdn-sample-finder",function(i){function f(a){jQuery(j).css("display",a?"block":"none")}function k(a){b.clear();b.add(gettext("Select a section"),"",0);jQuery.each(a,function(){b.add(this.title,this.id)})}var g=gettext("Sample Finder"),d=window.documentInfo,l=mdn.wiki.autosuggestTitleUrl,c,h,e,b,j;return{title:g,minWidth:350,minHeight:230,contents:[{id:"info",label:g,title:g,elements:[{id:"url",type:"text",label:gettext("Document"),"default":"",setup:function(){c||(c=this.getElement().getElementsByTag("input").$[0],
h=jQuery(c),h.mozillaAutocomplete({minLength:1,requireValidOption:!0,_renderItemAsLink:!0,styleElement:c.parentNode,autocompleteUrl:l,onSelect:function(a){e=a;a.sections.length&&(k(a.sections),f(1))},buildRequestData:function(a){a.current_locale=1;return a}}));jQuery(c).mozillaAutocomplete("clear")},commit:function(a){a.type=this.getValue()}},{type:"vbox",id:"attachment",children:[{type:"select",label:gettext("Sections in Document"),items:[],setup:function(){b=this;j=b.getElement().$;f(0);b.clear()},
validate:function(){if(!jQuery(b.getInputElement().$).val())return!1}}]}]}],onShow:function(){this.setupContent();d&&d.sections.length&&(h.val(d.title),k(d.sections),f(1),b.getInputElement().$.focus());e=null},onOk:function(){var a=jQuery(b.getInputElement().$).val();if(a){a="{{ EmbedLiveSample('"+a+"', '', '', ''";e&&(a+=", '"+e.slug+"'");var a=a+") }}",c=new CKEDITOR.dom.element("p",i.document);c.setText(a);i.insertElement(c)}},onFocus:function(){this.getContentElement("info","url").focus()}}});